<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COOKI Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        .success {
            color: green;
        }

        .error {
            color: red;
        }

        .info {
            color: blue;
        }
    </style>
</head>

<body>
    <h1>COOKI Application Test</h1>

    <div class="test-section">
        <h2>Local Storage Test</h2>
        <button onclick="testLocalStorage()">Test Local Storage</button>
        <div id="localStorage-result"></div>
    </div>

    <div class="test-section">
        <h2>API Test</h2>
        <button onclick="testAPI()">Test TheMealDB API</button>
        <div id="api-result"></div>
    </div>

    <div class="test-section">
        <h2>Navigation Test</h2>
        <a href="index.html" target="_blank">Open Main Page</a><br>
        <a href="meal-planner.html" target="_blank">Open Meal Planner</a><br>
        <a href="shopping-list.html" target="_blank">Open Shopping List</a>
    </div>

    <div class="test-section">
        <h2>Current Status</h2>
        <div id="status"></div>
    </div>

    <script>
        function testLocalStorage() {
            const result = document.getElementById('localStorage-result');
            try {
                // Test localStorage
                localStorage.setItem('test', 'COOKI test successful');
                const testValue = localStorage.getItem('test');
                localStorage.removeItem('test');

                if (testValue === 'COOKI test successful') {
                    result.innerHTML = '<span class="success">✓ Local Storage is working</span>';
                } else {
                    result.innerHTML = '<span class="error">✗ Local Storage test failed</span>';
                }
            } catch (error) {
                result.innerHTML = `<span class="error">✗ Local Storage error: ${error.message}</span>`;
            }
        }

        async function testAPI() {
            const result = document.getElementById('api-result');
            try {
                const response = await fetch('https://www.themealdb.com/api/json/v1/1/search.php?s=chicken');
                const data = await response.json();

                if (data.meals && data.meals.length > 0) {
                    result.innerHTML = `<span class="success">✓ API is working (found ${data.meals.length} chicken recipes)</span>`;
                } else {
                    result.innerHTML = '<span class="error">✗ API returned no results</span>';
                }
            } catch (error) {
                result.innerHTML = `<span class="error">✗ API error: ${error.message}</span>`;
            }
        }

        function updateStatus() {
            const status = document.getElementById('status');
            const currentTime = new Date().toLocaleString();

            // Check if all required files exist
            const files = ['index.html', 'meal-planner.html', 'shopping-list.html', 'style.css', 'main.js', 'meal-planner.js', 'shopping-list.js'];
            const missingFiles = [];

            status.innerHTML = `
                <p><strong>Test Time:</strong> ${currentTime}</p>
                <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
                <p><strong>Local Storage:</strong> ${typeof (Storage) !== "undefined" ? "Available" : "Not Available"}</p>
                <p><strong>Fetch API:</strong> ${typeof (fetch) !== "undefined" ? "Available" : "Not Available"}</p>
                <p><strong>Current URL:</strong> ${window.location.href}</p>
            `;
        }

        // Run tests on page load
        window.addEventListener('load', () => {
            updateStatus();
            testLocalStorage();
            testAPI();
        });
    </script>
</body>

</html>